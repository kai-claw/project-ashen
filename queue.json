{
  "phase": 25,
  "name": "Quest System",
  "subtasks": [
    {
      "id": "quest-data",
      "name": "QuestData.js",
      "priority": "P0",
      "status": "ready-for-review",
      "worker": 1,
      "description": "Quest types, structure, 15+ starter quests, difficulty tiers, chain quests, optional objectives",
      "workerNotes": "Created QuestData.js with: (1) QUEST_TYPE enum (KILL, GATHER, EXPLORE, DELIVER, ESCORT, BOSS), (2) QUEST_STATUS and QUEST_DIFFICULTY enums, (3) OBJECTIVE_TYPE enum for all objective variants, (4) QUEST_GIVERS with 8 NPCs (Elder Marcus, Blacksmith Greta, Hunter Jorik, Mage Selene, Guard Captain Theron, Merchant Lydia, Herbalist Mira, Mysterious Stranger), (5) EXPLORATION_AREAS with 8 locations, (6) 17 complete quests: First Steps, Gathering Herbs, Guard Duty, Bandit Problem, Mira's Special Brew, Forge Materials, Explore the Ruins, Merchant Delivery, Urgent Medicine, Escort the Merchant, Golem Threat, Shadow Wraith Hunt, The Captain's Trust, Master Craftsmanship, Selene's Research, Stranger Introduction, Daily Hunt, (7) Each quest has: objectives[], optionalObjectives[] with bonusRewards, prerequisites[], unlocks[], dialogue{intro,accept,progress,complete}, timeLimitMinutes, isRepeatable, cooldownHours, (8) QUEST_CHAINS for story progression, (9) DIFFICULTY_SCALE with xp/gold multipliers, (10) Helper functions: getQuest, getQuestsForGiver, arePrerequisitesMet, getRelativeDifficulty, getQuestsByType, getQuestChain, getNextInChain"
    },
    {
      "id": "quest-manager",
      "name": "QuestManager.js",
      "priority": "P0",
      "status": "ready-for-review",
      "worker": 1,
      "description": "Track active/completed/available quests, progress tracking, completion, rewards, persistence",
      "workerNotes": "Created QuestManager.js with: (1) activeQuests Map, completedQuests Set, availableQuests Set, failedQuests Set, questCooldowns Map, (2) acceptQuest() - validates prerequisites, max 10 active, cooldowns, creates state with deep-copied objectives, handles auto-received items for delivery quests, (3) updateProgress(type, target, amount) - matches objectives by type mapping, updates progress, emits events, (4) checkQuestCompletion() - auto-marks READY_TO_TURN_IN when all objectives met, (5) turnInQuest() - calculates rewards including optional bonuses, gives gold/xp/items, removes quest items, sets cooldowns for repeatable, unlocks next quests, (6) abandonQuest()/failQuest() - cleanup and state management, (7) Event system: onQuestAccepted/onObjectiveProgress/onObjectiveComplete/onQuestComplete/onQuestTurnedIn/onQuestFailed/onQuestAbandoned/onQuestAvailable, (8) localStorage persistence save/load, (9) Quest tracker UI with styled objectives, progress bars, time remaining for timed quests, (10) Notification popups for quest events and rewards, (11) getQuestMarkers() for map integration, (12) shouldDropQuestItem() for quest-only drops, (13) Timed quest checker runs every 5 seconds"
    },
    {
      "id": "quest-world-hooks",
      "name": "QuestWorldHooks.js",
      "priority": "P1",
      "status": "ready-for-review",
      "worker": 1,
      "description": "Hook quest tracking into world events - enemy deaths, item pickups, area exploration, NPC interactions",
      "workerNotes": "Created QuestWorldHooks.js with: (1) onEnemyKilled(enemyType, enemyData) - updates kill progress, checks quest item drops, (2) onBossKilled(bossId, bossData) - updates boss quest progress, (3) onItemPickup(itemId, amount) - updates gather progress, removes glow effects, (4) onAreaEnter(areaId) - updates exploration progress, removes markers, (5) updatePlayerPosition(position) - checks exploration markers proximity, (6) onNpcInteraction(npcId, npcData) - checks delivery quests, talk objectives, (7) onEscortDamage/onEscortArrived - escort quest handling, (8) Exploration markers: glowing 3D waypoints with ring, inner glow, vertical beam, point light, animation (rotation, pulse, bob), (9) Quest enemy spawn tracking - ensures enough enemies for kill quests, (10) Quest item glow effects for world items, (11) update(delta, playerPosition) - animates markers, checks locations, (12) main.js integration: hooks into enemyManager.onEnemyDeath, bossSpawner.onBossDefeated, lootManager.onItemPickup, dialogueManager.startDialogue"
    },
    {
      "id": "quest-ui",
      "name": "QuestUI.js",
      "priority": "P0",
      "status": "ready-for-review",
      "worker": 2,
      "description": "Quest Journal panel (J key), HUD tracker, completion popup, notifications, filters/sort",
      "workerNotes": "Created QuestUI.js (44KB) with: (1) Quest Journal panel opened with J key - 3 tabs: Active, Available, Completed with counts, (2) Filter by quest type (kill/gather/explore/deliver/escort/boss), sort by difficulty/type/name, (3) Quest list shows title, difficulty badge, type icon; ready-to-turn-in quests highlighted green, (4) Quest details panel: title, description, quest giver portrait+name+title, objectives with progress bars (X/Y format), optional bonus objectives in blue, rewards preview (gold/XP/items), (5) Action buttons: Track (add to HUD, max 3 tracked), Abandon (with confirmation modal), Accept (for available quests), (6) HUD Tracker: compact panel top-right showing tracked quest objectives with progress, collapsible, auto-tracks first active quests if none selected, (7) Quest completion popup: centered 'QUEST COMPLETE!' banner with animated rewards display, auto-dismisses, (8) Corner toast notifications for new quests, objective progress, quest available, (9) Completed quests shown grayed in history tab, (10) Full CSS styling with dark fantasy theme, animations for popups/notifications, responsive scrolling"
    },
    {
      "id": "npc-quest-givers",
      "name": "NPCQuestGivers.js",
      "priority": "P0",
      "status": "ready-for-review",
      "worker": 2,
      "description": "NPC integration with markers, dialogue, quest offers, turn-ins, progress comments",
      "workerNotes": "Created NPCQuestGivers.js (33KB) with: (1) NPCQuestGiver class creates 3D NPC meshes (capsule body, sphere head) with colored materials per NPC type, (2) Floating name plates with canvas textures showing name + title, (3) Quest markers above heads: yellow ! for available quests, yellow ? for turn-in ready, gray ? for in-progress, blue ! for dailies, (4) Marker animations: bobbing, rotation, glow pulse, point light, (5) Full dialogue UI: NPC portrait, name/title header, dialogue text, quest info box with objectives/rewards preview, (6) Accept/Decline buttons for quest offers, Complete Quest button for turn-ins, Continue button for idle/progress dialogue, (7) NPCs give contextual progress comments based on completion % ('Almost there!', 'Good progress!'), (8) Quest givers: Elder Marcus (tutorial), Guard Captain Theron (kill quests), Merchant Lydia (delivery), Hunter Jorik (daily hunts), Mage Selene (explore), Blacksmith Greta (gather), Herbalist Mira (herbs), Mysterious Stranger (shadow), (9) Notice Board UI for daily/repeatable quest selection, (10) All markers auto-update when quest states change"
    },
    {
      "id": "quest-rewards",
      "name": "QuestRewards.js",
      "priority": "P1",
      "status": "ready-for-review",
      "worker": 2,
      "description": "Reward types, reputation system, factions, milestones, achievements, scaling",
      "workerNotes": "Created QuestRewards.js (31KB) with: (1) 5 Factions: Ashvale Village, Hunters Guild, Mages Circle, Merchants Union, Shadow Brokers - each with icon/color/description, (2) 8 Reputation tiers: Hated → Hostile → Unfriendly → Neutral → Friendly → Honored → Revered → Exalted, each with merchant discount multiplier, (3) Milestones per faction (4 each): unlock titles, shop tiers, abilities, cosmetics at rep thresholds (500/2000/5000/10000), (4) Quest-to-faction mapping: village quests → village rep, hunt quests → hunters guild, etc., (5) 8 Achievements: Quest Novice/Adept/Master/Legend (1/10/25/50 quests), Boss Slayer (5 bosses), Daily Devotee (20 dailies), Making Friends/Legend Among Legends (rep milestones), (6) Reward calculation with difficulty scaling (trivial 0.5x → legendary 2x), first-time completion 25% bonus, (7) Merchant discount system based on Merchants Union rep, (8) Reputation Panel (U key): faction list with progress bars to next tier, (9) Animated reward chest popup after quest turn-in, (10) Notification popups for rep gains, milestone unlocks, achievement earned, (11) Full localStorage persistence for rep/achievements/stats"
    }
  ],
  "lastUpdated": "2026-02-14T22:25:00Z",
  "workerStatus": "All 6 subtasks ready-for-review. Build verified ✓ Deploy verified ✓ — Worker 1 + Worker 2 complete"
}
