{
  "phase": 25,
  "name": "Quest System",
  "subtasks": [
    {
      "id": "quest-data",
      "name": "QuestData.js",
      "priority": "P0",
      "status": "ready-for-review",
      "worker": 1,
      "description": "Quest types, structure, 15+ starter quests, difficulty tiers, chain quests, optional objectives",
      "workerNotes": "Created QuestData.js with: (1) QUEST_TYPE enum (KILL, GATHER, EXPLORE, DELIVER, ESCORT, BOSS), (2) QUEST_STATUS and QUEST_DIFFICULTY enums, (3) OBJECTIVE_TYPE enum for all objective variants, (4) QUEST_GIVERS with 8 NPCs (Elder Marcus, Blacksmith Greta, Hunter Jorik, Mage Selene, Guard Captain Theron, Merchant Lydia, Herbalist Mira, Mysterious Stranger), (5) EXPLORATION_AREAS with 8 locations, (6) 17 complete quests: First Steps, Gathering Herbs, Guard Duty, Bandit Problem, Mira's Special Brew, Forge Materials, Explore the Ruins, Merchant Delivery, Urgent Medicine, Escort the Merchant, Golem Threat, Shadow Wraith Hunt, The Captain's Trust, Master Craftsmanship, Selene's Research, Stranger Introduction, Daily Hunt, (7) Each quest has: objectives[], optionalObjectives[] with bonusRewards, prerequisites[], unlocks[], dialogue{intro,accept,progress,complete}, timeLimitMinutes, isRepeatable, cooldownHours, (8) QUEST_CHAINS for story progression, (9) DIFFICULTY_SCALE with xp/gold multipliers, (10) Helper functions: getQuest, getQuestsForGiver, arePrerequisitesMet, getRelativeDifficulty, getQuestsByType, getQuestChain, getNextInChain"
    },
    {
      "id": "quest-manager",
      "name": "QuestManager.js",
      "priority": "P0",
      "status": "ready-for-review",
      "worker": 1,
      "description": "Track active/completed/available quests, progress tracking, completion, rewards, persistence",
      "workerNotes": "Created QuestManager.js with: (1) activeQuests Map, completedQuests Set, availableQuests Set, failedQuests Set, questCooldowns Map, (2) acceptQuest() - validates prerequisites, max 10 active, cooldowns, creates state with deep-copied objectives, handles auto-received items for delivery quests, (3) updateProgress(type, target, amount) - matches objectives by type mapping, updates progress, emits events, (4) checkQuestCompletion() - auto-marks READY_TO_TURN_IN when all objectives met, (5) turnInQuest() - calculates rewards including optional bonuses, gives gold/xp/items, removes quest items, sets cooldowns for repeatable, unlocks next quests, (6) abandonQuest()/failQuest() - cleanup and state management, (7) Event system: onQuestAccepted/onObjectiveProgress/onObjectiveComplete/onQuestComplete/onQuestTurnedIn/onQuestFailed/onQuestAbandoned/onQuestAvailable, (8) localStorage persistence save/load, (9) Quest tracker UI with styled objectives, progress bars, time remaining for timed quests, (10) Notification popups for quest events and rewards, (11) getQuestMarkers() for map integration, (12) shouldDropQuestItem() for quest-only drops, (13) Timed quest checker runs every 5 seconds"
    },
    {
      "id": "quest-world-hooks",
      "name": "QuestWorldHooks.js",
      "priority": "P1",
      "status": "ready-for-review",
      "worker": 1,
      "description": "Hook quest tracking into world events - enemy deaths, item pickups, area exploration, NPC interactions",
      "workerNotes": "Created QuestWorldHooks.js with: (1) onEnemyKilled(enemyType, enemyData) - updates kill progress, checks quest item drops, (2) onBossKilled(bossId, bossData) - updates boss quest progress, (3) onItemPickup(itemId, amount) - updates gather progress, removes glow effects, (4) onAreaEnter(areaId) - updates exploration progress, removes markers, (5) updatePlayerPosition(position) - checks exploration markers proximity, (6) onNpcInteraction(npcId, npcData) - checks delivery quests, talk objectives, (7) onEscortDamage/onEscortArrived - escort quest handling, (8) Exploration markers: glowing 3D waypoints with ring, inner glow, vertical beam, point light, animation (rotation, pulse, bob), (9) Quest enemy spawn tracking - ensures enough enemies for kill quests, (10) Quest item glow effects for world items, (11) update(delta, playerPosition) - animates markers, checks locations, (12) main.js integration: hooks into enemyManager.onEnemyDeath, bossSpawner.onBossDefeated, lootManager.onItemPickup, dialogueManager.startDialogue"
    },
    {
      "id": "quest-ui",
      "name": "QuestUI.js",
      "priority": "P0",
      "status": "in-progress",
      "worker": 2,
      "description": "Quest Journal panel (J key), HUD tracker, completion popup, notifications, filters"
    },
    {
      "id": "npc-quest-givers",
      "name": "NPCQuestGivers.js",
      "priority": "P0",
      "status": "pending",
      "worker": 2,
      "description": "NPC quest markers, quest dialogue integration, accept/decline, quest giver portraits"
    },
    {
      "id": "quest-rewards",
      "name": "QuestRewards.js",
      "priority": "P1",
      "status": "pending",
      "worker": 2,
      "description": "Reward types, reputation system, achievements, scaling rewards"
    }
  ],
  "lastUpdated": "2026-02-14T22:35:00Z",
  "workerStatus": "Worker 1: 3/3 ready-for-review | Worker 2: Starting quest-ui review"
}
